
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="" name="description"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Honey, There Is a Python in My Android Phone! | PyCon Taiwan 2019</title>
<link href="/2019/static/pycontw-2019/assets/favicon.ico" rel="shortcut icon"/>
<link href="/2019/static/pycontw-2019/assets/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="/2019/static/pycontw-2019/assets/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<meta content="" property="og:description"/>
<meta content="https://tw.pycon.org/2019/static/pycontw-2019/assets/og-image.png" property="og:image"/>
<link href="https://fonts.googleapis.com/earlyaccess/notosanstc.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400|Raleway:300,400" rel="stylesheet"/>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"/>
<link href="/2019/static/CACHE/css/1c025ccc360a.css" rel="stylesheet" type="text/css">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TNZ39PD');</script>
</link></head>
<body class="talk-detail">
<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-TNZ39PD" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<div data-controller="topNav">
<nav class="top-navbar">
<form  class="navbar-lang-switch" >

<input name="next" type="hidden" value="/2019/events/talk/851977095792820446/"/>
<button disabled="disabled" name="language" type="submit" value="zh-hant">
				ZH
			</button>
<button name="language" type="submit" value="en-us">
				<a href='/2019/en-us/events/talk/851977095792820446/' class="myclass">EN</a>
			</button>
</form>
<div class="navbar-centerbox">
<a class="navbar-logo" href="/2019/zh-hant/"></a>
</div>
<button aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler no-script" data-action="topNav#toggle" data-target="topNav.toggler" type="button">
<div><span></span><span></span><span></span></div>
</button>
<div class="navbar-social-desktop">
<a aria-label="部落格" class="fa fa-book" href="https://pycontw.blogspot.tw/" rel="noopener" target="_blank"></a>
<a aria-label="Facebook" class="fa fa-facebook-official" href="https://www.facebook.com/pycontw" rel="noopener" target="_blank"></a>
<a aria-label="Twitter" class="fa fa-twitter" href="https://twitter.com/pycontw" rel="noopener" target="_blank"></a>
<a aria-label="Email" class="fa fa-envelope" href="mailto:organizers@pycon.tw"></a>
</div>
</nav>
<nav class="menu-navbar-mobile no-script" data-target="topNav.menu">
<ul class="menu" data-controller="menu">
<li>
<a href="/2019/zh-hant/about/pycontw/">關於</a>
</li>
<li>
<a href="/2019/zh-hant/sponsor/sponsor/">贊助</a>
</li>
<li>
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-mobile-conference" type="checkbox"/>
<label for="menu-navbar-mobile-conference">議程</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/events/overview/">總覽</a></li>
<li><a href="/2019/zh-hant/events/schedule/">時間表</a></li>
<li><a href="/2019/zh-hant/speaking/recording/">錄影</a></li>
<li><a href="/2019/zh-hant/portal/">傳送門</a></li>
</ul>
</div>
</li>
<li>
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-mobile-events" type="checkbox"/>
<label for="menu-navbar-mobile-events">活動</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/events/keynotes/">基調演講</a></li>
<li><a href="/2019/zh-hant/events/talks/">一般演講</a></li>
<li><a href="/2019/zh-hant/events/tutorials/">專業課程</a></li>
<li><a href="/2019/zh-hant/events/open-spaces/">開放空間</a></li>
</ul>
</div>
</li>
<li>
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-mobile-registration" type="checkbox"/>
<label for="menu-navbar-mobile-registration">註冊</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/registration/ticket-info/">會議門票</a></li>
<li><a href="/2019/zh-hant/registration/financial-aid/">財務補助</a></li>
</ul>
</div>
</li>
<li>
<a href="/2019/zh-hant/venue/">會場</a>
</li>
<li>
<a href="/2019/zh-hant/dashboard/">My PyCon</a>
</li>
</ul>
<div class="navbar-social-mobile">
<a aria-label="部落格" class="fa fa-book" href="https://pycontw.blogspot.tw/" rel="noopener" target="_blank"></a>
<a aria-label="Facebook" class="fa fa-facebook-official" href="https://www.facebook.com/pycontw" rel="noopener" target="_blank"></a>
<a aria-label="Twitter" class="fa fa-twitter" href="https://twitter.com/pycontw" rel="noopener" target="_blank"></a>
<a aria-label="Email" class="fa fa-envelope" href="mailto:organizers@pycon.tw"></a>
</div>
</nav>
</div>
<header class="page-hero">
<nav class="menu-navbar-desktop">
<a class="menu-logo" href="/2019/zh-hant/"></a>
<ul class="menu" data-controller="menu">
<li>
<a href="/2019/zh-hant/about/pycontw/">關於</a>
</li>
<li>
<a href="/2019/zh-hant/sponsor/sponsor/">贊助</a>
</li>
<li data-action="mouseover-&gt;menu#open mouseout-&gt;menu#close" data-target="menu.item">
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-desktop-conference" type="checkbox"/>
<label for="menu-navbar-desktop-conference">議程</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/events/overview/">總覽</a></li>
<li><a href="/2019/zh-hant/events/schedule/">時間表</a></li>
<li><a href="/2019/zh-hant/speaking/recording/">錄影</a></li>
<li><a href="/2019/zh-hant/portal/">傳送門</a></li>
</ul>
</div>
</li>
<li data-action="mouseover-&gt;menu#open mouseout-&gt;menu#close" data-target="menu.item">
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-desktop-events" type="checkbox"/>
<label for="menu-navbar-desktop-events">活動</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/events/keynotes/">基調演講</a></li>
<li><a href="/2019/zh-hant/events/talks/">一般演講</a></li>
<li><a href="/2019/zh-hant/events/tutorials/">專業課程</a></li>
<li><a href="/2019/zh-hant/events/open-spaces/">開放空間</a></li>
</ul>
</div>
</li>
<li data-action="mouseover-&gt;menu#open mouseout-&gt;menu#close" data-target="menu.item">
<input data-action="change-&gt;menu#exclude" data-target="menu.checker" hidden="hidden" id="menu-navbar-desktop-registration" type="checkbox"/>
<label for="menu-navbar-desktop-registration">註冊</label>
<div class="dropdown">
<ul class="submenu">
<li><a href="/2019/zh-hant/registration/ticket-info/">會議門票</a></li>
<li><a href="/2019/zh-hant/registration/financial-aid/">財務補助</a></li>
</ul>
</div>
</li>
<li>
<a href="/2019/zh-hant/venue/">會場</a>
</li>
<li>
<a href="/2019/zh-hant/dashboard/">My PyCon</a>
</li>
</ul>
</nav>
</header>
<main>
<h1>Honey, There Is a Python in My Android Phone!</h1>
<section class="content info">
<ul>
<li>
<dfn class="location"></dfn>
<span>R2</span>
</li>
<li>
<dfn class="slot"></dfn>
<span>第 1 天，10:50‑11:20</span>
</li>
<li>
<dfn class="category">主題分類：</dfn>
<span>嵌入式系統</span>
</li>
<li>
<dfn class="language enen">語言：</dfn>
<span>英文演講</span>
</li>
<li>
<dfn class="python-level intermediate">Python 難易度：</dfn>
<span>中階</span>
</li>
</ul>
</section>
<h2>摘要</h2>
<section class="content">
<p>Simple scripting, such as Python, Bash, PHP, Perl are all embedded in modern OS. Since Android is also a linux-based OS, it is also possible to write a script. Unfortunately before SL4A arrives, it is impossible to script on Android phone. SL4A provides rich APIs that allow user to access Android intents such as GPS location, Accelerometer and etc. through scripting. Hence with those APIs, the user can build simple scripts to interact with those APIs.</p>
<p>This talks demonstrates how android intents can be accessed using python client, hence understanding the interaction between Android and Python API inside SL4A via RPC by dissecting the source code of both Android and Python API inside SL4A. The speaker will then demonstrate how different android intents such as GPS coordinate and gyroscope through a presentation of websocket coded in Python and webapp demo using babylon.js, together with a flask application that allows user to send SMS messages through Rest APIs, using android API.</p>
</section>
<h2>說明</h2>
<section class="content editor-readonly">
<div class="editor-preview">This is a small code snippet that I have written in Python for the POC of getting the GPS coordinate from android phone:

```python
import androidhelper 
import json 
import time 
from bottle import Bottle, run, response, request 
    
app = Bottle() 
droid = androidhelper.Android() 
    

@app.route("/location") 
def get_location(): 

    droid.startLocating() 
    droid.eventWaitFor('location', 12500) 

    time.sleep(0.1) 

    current_location = droid.readLocation().result 

    if not current_location: 
        current_location = droid.getLastKnownLocation().result 

    droid.stopLocating() 
    response.content_type = "application/json" 
    
    return json.dumps( 
        { 
            "result": current_location 
        }, indent=4 
    )  
```

This project was initiated during my Christmas vacation, inspired by [Android Barcode Scanner](https://www.mattcutts.com/blog/android-barcode-scanner/) as I was looking on the solution that I could catalogue my books by scanning the ISBN using android phone.

This quick solution did save me enormous amount of time in cataloguing my books. Intriguing by the design of APIs that can interact with android intents, I decided to dig further to understand how the APIs works. In concept, there is an RPC call between android app and python interpreter within the app that acts as a bridge, which allows python APIs to trigger Android intents, upon calling related APIs. For example, using the code snippet above, when Python GPS API is executed, the API will send request to Android GPS intent via the RPC call. Once Android intent receives the request, it will grab the GPS data, and passes the GPS data back to Python GPS API through the same channel.

Reference: 
[python-for-android](https://github.com/tangingw/python-for-android)
[Qpython](http://www.qpython.org/en/guide_howtostart.html)
[Android Barcode Scanner](https://www.mattcutts.com/blog/android-barcode-scanner/)</div>
</section>
<h2>
	
	講者
	
</h2>
<article class="media">
<header>
<figure>
<img src="/2019/media/cache/95/89/9589ea26a4817aa4056611105f9ca927.jpg"/>
<figcaption>Ing Wei Tang</figcaption>
</figure>
</header>
<div class="content">
<p>Ing Wei is the chair for PyCon MY 2019, the co-chair of PyCon MY 2018, and vice president of MyPOP. He has spoken in various PyCons, particularly in PyCon APAC 2018, as well as involving in PyCon communities actively in Malaysia.</p>
<p>He uses python a lot in his daily work, especially coding the automation process and flow. During his past time, he likes to experience and perform hacking different things on operating system level.</p>
<p>Apart from programming language, he can also speak 5 different types of languages concurrently in one sentence. Please ask for demo if time permits.</p>
<div class="social">
<a href="https://github.com/tangingw" rel="noopener" target="_blank"><span aria-hidden="true" class="fa fa-github"></span></a>
</div>
</div>
</article>
<iframe class="slido" src="https://app.sli.do/event/jomragaz"></iframe>
</main>
<footer>
<div class="footer-logos">
<div class="footer-logo"></div>
</div>
<ul>
<li><a href="/2019/zh-hant/about/code-of-conduct/">行為準則</a></li>
<li><a href="/2019/zh-hant/about/staff/">工作人員</a></li>
<li><a href="/2019/zh-hant/about/community/">社群</a></li>
</ul>
<p class="copyright">2019 PyCon Taiwan</p>
</footer>
<script src="/2019/static/CACHE/js/ce994d83f936.js" type="text/javascript"></script>
<script src="/2019/static/js/vendors/simplemde.min.js"></script>
<script src="/2019/static/js/tools/simplemde-setup.js"></script>
</body>
</html>
<style>.myclass{text-decoration: none;color: #616e86;}.myclass:hover{text-decoration: none;color: #4a5363;}</style>